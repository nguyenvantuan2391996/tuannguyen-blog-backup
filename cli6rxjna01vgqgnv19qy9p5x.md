---
title: "X√¢y d·ª±ng ·ª©ng d·ª•ng nghe nh·∫°c tr·ª±c tuy·∫øn v·ªõi JavaScript"
seoTitle: "X√¢y d·ª±ng ·ª©ng d·ª•ng nghe nh·∫°c tr·ª±c tuy·∫øn youtube v·ªõi JavaScript"
seoDescription: "·ª®ng d·ª•ng nghe nh·∫°c - n∆°i s·∫Ω d·∫´n b·∫°n v√†o m·ªôt th·∫ø gi·ªõi √¢m nh·∫°c tuy·ªát v·ªùi v√† ƒëa d·∫°ng. V·ªõi s·ª± ph√°t tri·ªÉn kh√¥ng ng·ª´ng c·ªßa c√¥ng ngh·ªá, nghe nh·∫°c ƒë√£ tr·ªü n√™n d·ªÖ d√†ng"
datePublished: Sun May 28 2023 02:00:39 GMT+0000 (Coordinated Universal Time)
cuid: cli6rxjna01vgqgnv19qy9p5x
slug: xay-dung-ung-dung-nghe-nhac-truc-tuyen-voi-javascript
cover: https://cdn.hashnode.com/res/hashnode/image/upload/v1685692826598/cef57441-7c72-4fd4-90d0-fd64267c617c.jpeg
ogImage: https://cdn.hashnode.com/res/hashnode/image/upload/v1685692841081/67061eb2-9be4-4e38-82d6-6cfd4dc5a2b7.jpeg
tags: js, javascript, musicplayer

---

# I. Gi·ªõi thi·ªáu v·ªÅ ·ª©ng d·ª•ng nghe nh·∫°c

·ª®ng d·ª•ng nghe nh·∫°c - n∆°i s·∫Ω d·∫´n b·∫°n v√†o m·ªôt th·∫ø gi·ªõi √¢m nh·∫°c tuy·ªát v·ªùi v√† ƒëa d·∫°ng. V·ªõi s·ª± ph√°t tri·ªÉn kh√¥ng ng·ª´ng c·ªßa c√¥ng ngh·ªá, nghe nh·∫°c ƒë√£ tr·ªü n√™n d·ªÖ d√†ng v√† ti·ªán l·ª£i h∆°n bao gi·ªù h·∫øt. Nh·ªØng ·ª©ng d·ª•ng nghe nh·∫°c ph·ªï bi·∫øn v√† tuy·ªát v·ªùi d∆∞·ªõi ƒë√¢y.

1. **Spotify**: V·ªõi h∆°n m·ªôt tri·ªáu b√†i h√°t v√† nhi·ªÅu th·ªÉ lo·∫°i √¢m nh·∫°c kh√°c nhau, Spotify l√† m·ªôt trong nh·ªØng ·ª©ng d·ª•ng nghe nh·∫°c h√†ng ƒë·∫ßu tr√™n th·ªã tr∆∞·ªùng. B·∫°n c√≥ th·ªÉ t√¨m ki·∫øm, nghe v√† chia s·∫ª nh·∫°c y√™u th√≠ch c·ªßa m√¨nh m·ªôt c√°ch d·ªÖ d√†ng.
    
2. **Apple Music**: ƒê·ªëi v·ªõi ng∆∞·ªùi d√πng h·ªá sinh th√°i Apple, Apple Music l√† l·ª±a ch·ªçn ho√†n h·∫£o. V·ªõi kho nh·∫°c phong ph√∫, c√°c b√†i h√°t v√† album m·ªõi nh·∫•t, b·∫°n c√≥ th·ªÉ truy c·∫≠p v√† nghe nh·∫°c tr√™n nhi·ªÅu thi·∫øt b·ªã Apple kh√°c nhau.
    
3. **YouTube Music**: V·ªõi YouTube Music, b·∫°n c√≥ th·ªÉ tr·∫£i nghi·ªám √¢m nh·∫°c t·ª´ h√†ng tri·ªáu b√†i h√°t v√† video √¢m nh·∫°c tr√™n YouTube. ·ª®ng d·ª•ng n√†y cung c·∫•p c√°c danh s√°ch ph√°t c√° nh√¢n, g·ª£i √Ω d·ª±a tr√™n s·ªü th√≠ch v√† nhu c·∫ßu nghe nh·∫°c c·ªßa b·∫°n.
    
4. **SoundCloud**: SoundCloud l√† m·ªôt n·ªÅn t·∫£ng nghe nh·∫°c tr·ª±c tuy·∫øn cho ph√©p ng∆∞·ªùi d√πng t√¨m ki·∫øm v√† ph√°t c√°c b√†i h√°t t·ª´ c√°c ngh·ªá sƒ© ƒë·ªôc l·∫≠p v√† nh·∫°c sƒ© m·ªõi n·ªïi. B·∫°n c√≥ th·ªÉ t√¨m th·∫•y c√°c b·∫£n remix, b√†i h√°t ch∆∞a ph√°t h√†nh v√† nhi·ªÅu n·ªôi dung ƒë·ªôc ƒë√°o kh√°c tr√™n SoundCloud.
    
5. **Deezer**: Deezer cung c·∫•p th∆∞ vi·ªán √¢m nh·∫°c r·ªông l·ªõn v·ªõi h√†ng tri·ªáu b√†i h√°t t·ª´ nhi·ªÅu th·ªÉ lo·∫°i kh√°c nhau. B·∫°n c√≥ th·ªÉ t·∫°o danh s√°ch ph√°t c√° nh√¢n, kh√°m ph√° b·∫£n sao ch·∫•t l∆∞·ª£ng cao (lossless) v√† t·∫≠n h∆∞·ªüng tr·∫£i nghi·ªám nghe nh·∫°c kh√¥ng gi·ªõi h·∫°n.
    
    ![Top ph·∫ßn m·ªÅm nghe ph·ªï bi·∫øn hi·ªán nay - K√™nh Tool](https://kenhtool.com/wp-content/uploads/2021/12/phan-mem-nghe.jpg align="center")
    

V·∫≠y t·∫°i sao ch√∫ng ta kh√¥ng t·ª± t·∫°o cho ri√™ng m√¨nh m·ªôt ·ª©ng d·ª•ng nghe nh·∫°c tr·ª±c tuy·∫øn :D H√¥m nay c√πng m√¨nh t·∫°o ·ª©ng d·ª•ng nghe nh·∫°c v·ªõi JavaScript. Ngu·ªìn nh·∫°c m√¨nh s·∫Ω l·∫•y t·ª´ trang youtube.

# II. C·∫•u tr√∫c m√£ ngu·ªìn

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1684686907773/e1de8c55-ed9a-43ad-82d0-a775439eca72.png align="center")

* css: Th∆∞ m·ª•c l∆∞u c√°c file css ƒë·ªÉ cƒÉn ch·ªânh, l√†m ƒë·∫πp giao di·ªán.
    
* js: Th∆∞ m·ª•c ch·ª©a c√°c file JavaScript ƒë·ªÉ x·ª≠ l√Ω c√°c ch·ª©c nƒÉng c·ªßa game.
    
* home.html: Giao di·ªán ·ª©ng d·ª•ng nghe nh·∫°c.
    

# III. X√¢y d·ª±ng ·ª©ng d·ª•ng

## 1\. Giao di·ªán

* home.html: Giao di·ªán ·ª©ng d·ª•ng nghe nh·∫°c.
    

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" charset="UTF-8">
    <title>Music Player Manager By Tuan Nguyen</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin="anonymous" />
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="css/music.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
    <body>
        <div class="wrapper">
            <div class="player__container">
                <div class="player__body">
                    <div class="body__cover">
                        <ul class="list list--cover">
                            <li>
                                <a class="list__link" href=""><i class="fa fa-navicon"></i></a>
                            </li>
                            <li>
                                <a class="list__link" href=""></a>
                            </li>
                            <li>
                                <a id="btn-search" type="button" class="list__link" href=""><i class="fa fa-search"></i></a>
                            </li>
                        </ul>

                        <img id="album-cover" src="http://ecx.images-amazon.com/images/I/51XSHShbPiL.jpg" alt="Album cover" />

                        <div class="range"></div>
                    </div>

                    <div class="body__info">
                        <div id="song-name" class="info__song"></div>
                        <div id="song-artist" class="info__artist"></div>
                    </div>

                    <div class="body__buttons">
                        <ul class="list list--buttons">
                            <li><a id="btn-backward" type="button" class="list__link"><i class="fa fa-step-backward"></i></a></li>
                            <li><a id="btn-play-song" type="button" class="list__link"><i id="icon-play-pause" class="fa fa-play"></i></a></li>
                            <li><a id="btn-forward" type="button" class="list__link"><i class="fa fa-step-forward"></i></a></li>
                        </ul>
                    </div>
                </div>

                <div class="player__footer">
                    <ul class="list list--footer">
                        <li><a href="#" class="list__link"><i class="fa fa-heart"></i></a></li>
                        <li><a href="#" class="list__link"><i class="fa fa-random"></i></a></li>
                        <li><a href="#" class="list__link"><i class="fa fa-undo"></i></a></li>
                        <li><a href="#" class="list__link"><i class="fa fa-ellipsis-h"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
        <iframe hidden id="song" src="" frameborder="0" allowfullscreen playsinline allow="autoplay; encrypted-media"></iframe>
    </body>
</html>

<script type="text/javascript" src="js/constants.js"></script>
<script type="text/javascript" src="js/music.js"></script>
<script type="text/javascript" src="js/utils.js"></script>
<script type="text/javascript" src="js/youtubeAPI.js"></script>
```

music.css: Th√™m style v√†o c√°c ph·∫ßn t·ª≠ HTML ƒë√≥ nh∆∞ ƒë·ªïi b·ªë c·ª•c, m√†u s·∫Øc trang, ƒë·ªïi m√†u ch·ªØ cho giao di·ªán ·ª©ng d·ª•ng.

```css
html {
    font-size: 16px;
}
body {
    font-family: 'Roboto', Arial, Verdana, sans-serif;
    background: #e4f2fb;
}
a {
    text-decoration: none;
}
.player__container {
    margin-top: 2rem;
    margin-right: auto;
    margin-left: auto;
    max-width: 30rem;
    height: 50rem;
    background: #fff;
    border-radius: 0.25rem;
    box-shadow: 0 10px 20px -5px rgba(0, 0, 0, .19), 0 6px 6px -10px rgba(0, 0, 0, .23);
}
.body__cover {
    position: relative;
}
.body__cover img {
    max-width: 100%;
    border-radius: 0.25rem;
}
.list {
    display: flex;
    margin: 0;
    padding: 0;
    list-style-type: none;
}
.body__buttons, .body__info, .player__footer {
    padding-right: 2rem;
    padding-left: 2rem;
}
.list--cover, .list--footer {
    justify-content: space-between;
}
.list--header .list__link, .list--footer .list__link {
    color: #888;
}
.list--cover {
    position: absolute;
    top: 0.5rem;
    width: 100%;
}
.list--cover li:first-of-type {
    margin-left: 0.75rem;
}
.list--cover li:last-of-type {
    margin-right: 0.75rem;
}
.list--cover a {
    font-size: 1.15rem;
    color: #fff;
}
.range {
    position: relative;
    top: -1.5rem;
    right: 0;
    left: 0;
    margin: auto;
    background: rgba(255, 255, 255, .95);
    width: 80%;
    height: 0.125rem;
    border-radius: 0.25rem;
    cursor: pointer;
}
.range:before, .range:after {
    content: "";
    position: absolute;
    cursor: pointer;
}
.range:before {
    width: 3rem;
    height: 100%;
    background: linear-gradient(to right, rgba(211, 3, 32, .5), rgba(211, 3, 32, .85));
    border-radius: 0.25rem;
    overflow: hidden;
}
.range:after {
    top: -0.375rem;
    left: 3rem;
    z-index: 3;
    width: 0.875rem;
    height: 0.875rem;
    background: #fff;
    border-radius: 50%;
    box-shadow: 0 0 3px rgba(0, 0, 0, .15), 0 2px 4px rgba(0, 0, 0, .15);
    transition: all 0.25s cubic-bezier(0.4, 0, 1, 1);
}
.range:focus:after, .range:hover:after {
    background: rgba(211, 3, 32, .95);
}
.body__info {
    padding-top: 1.5rem;
    padding-bottom: 1.25rem;
    text-align: center;
}
.info__album, .info__song {
    margin-bottom: 0.5rem;
}
.info__artist, .info__album {
    font-size: 0.75rem;
    font-weight: 300;
    color: #666;
}
.info__song {
    font-size: 1.15rem;
    font-weight: 400;
    color: #d30320;
}
.body__buttons {
    padding-bottom: 2rem;
}
.body__buttons {
    padding-top: 1rem;
}
.list--buttons {
    align-items: center;
    justify-content: center;
}
.list--buttons li:nth-of-type(n+2) {
    margin-left: 1.25rem;
}
.list--buttons a {
    padding: 0.45rem 0.75rem;
    font-size: 1rem;
    border-radius: 50%;
    box-shadow: 0 3px 6px rgba(33, 33, 33, .1), 0 3px 12px rgba(33, 33, 33, .15);
}
.list--buttons a:focus, .list--buttons a:hover {
    color: rgba(171, 2, 26, .95);
    opacity: 1;
    box-shadow: 0 6px 9px rgba(33, 33, 33, .1), 0 6px 16px rgba(33, 33, 33, .15);
}
.list--buttons li:nth-of-type(2) a {
    padding: 0.82rem 1rem 0.82rem 1.19rem;
    margin-left: 0.5rem;
    font-size: 1.25rem;
    color: rgba(211, 3, 32, .95);
}
.list--buttons li:first-of-type a, .list--buttons li:last-of-type a {
    font-size: 0.95rem;
    color: #212121;
    opacity: 0.5;
}
.list--buttons li:first-of-type a:focus, .list--buttons li:last-of-type a:focus, .list--buttons li:first-of-type a:hover, .list--buttons li:last-of-type a:hover {
    color: #d30320;
    opacity: 0.75;
}
.list__link {
    transition: all 0.25s cubic-bezier(0.4, 0, 1, 1);
}
.list__link:focus, .list__link:hover {
    color: #d30320;
}
.player__footer {
    padding-top: 1rem;
    padding-bottom: 2rem;
}
.list--footer a {
    opacity: 0.5;
}
.list--footer a:focus, .list--footer a:hover {
    opacity: 0.9;
}
```

M√¨nh c√≥ tham kh·∫£o m√£ ngu·ªìn giao di·ªán ·ªü ƒë√¢y. Thanks bro n√†o ƒë√≥ ƒë√£ share source code nh√© [Music player UI design](https://codepen.io/alexdevero/pen/aZjLNw)

V√¨ ph·∫ßn giao di·ªán html v√† css c≈©ng kh√¥ng c√≥ g√¨ qu√° ph·ª©c t·∫°p n√™n c√°c b·∫°n c√≥ th·ªÉ t·ª± ƒë·ªçc hi·ªÉu n√≥ nh√©! üòÑüòÑüòÑ Sau khi html v√† css 1 ch√∫t ch√∫ng ta s·∫Ω ƒë∆∞·ª£c giao di·ªán nh∆∞ th·∫ø n√†y.

Giao di·ªán ·ª©ng d·ª•ng tr√™n desktop

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1684687318189/dfeffaf5-3f9d-41da-b3c5-700298e8c0f4.png align="center")

Giao di·ªán ·ª©ng d·ª•ng tr√™n mobile

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1684687433420/448e5c20-cec4-4b53-9e78-6a79ba139afa.jpeg align="center")

## 2\. T·∫°o API key Youtube

Tr∆∞·ªõc khi v√†o c√°c ch·ª©c nƒÉng chi ti·∫øt. Do ngu·ªìn nh·∫°c t·ª´ youtube n√™n m·ªçi ng∆∞·ªùi generate m·ªôt api key ƒë·ªÉ l·∫•y th√¥ng tin v√† ph√°t nh·∫°c c·ªßa youtube. C√°c b∆∞·ªõc l·∫•y api key nh∆∞ sau:

* V√†o trang [Google Developers Console](https://console.developers.google.com/).
    
* T·∫°o 1 project m·ªõi ho·∫∑c ch·ªçn m·ªôt project ƒë√£ c√≥ s·∫µn.
    
* B·∫≠t t√≠nh nƒÉng YouTube Data API cho project.
    
* Generate m·ªôt API key cho project.
    

## 3\. X·ª≠ l√Ω c√°c API Youtube

X·ª≠ l√Ω t√¨m danh s√°ch b√†i h√°t theo t·ª´ kho√° t√¨m ki·∫øm. ·ªû ƒë√¢y m√¨nh l·∫•y 10 b√†i h√°t g·∫ßn nh·∫•t v·ªõi t·ª´ kho√° theo search c·ªßa Youtube

```JavaScript
async function searchKey(keyword) {
  return await searchYouTube(keyword, API_KEY);
}

async function searchYouTube(keyword, apiKey) {
  // Perform keyword search using YouTube Data API v3
  const searchResponse = await fetch(
    `https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=10&q=${encodeURIComponent(
      keyword
    )}&key=${apiKey}`
  );
  const searchResult = await searchResponse.json();

  return searchResult.items.map((item) => item.id.videoId);
}
```

L·∫•y th√¥ng tin c·ªßa b√†i h√°t theo id: ti√™u ƒë·ªÅ, k√™nh ph√°t video, thumbnail c·ªßa video,...

```JavaScript
async function getInfoSong(id) {
  let res = {
    title: NOT_FOUND,
    artist: NOT_FOUND,
    thumbnail: NOT_FOUND,
  };

  await fetch(
    `https://www.googleapis.com/youtube/v3/videos?id=` +
      id +
      `&part=snippet&key=` +
      API_KEY
  )
    .then((response) => response.json())
    .then((data) => {
      const video = data.items[0];
      res.artist = video.snippet.channelTitle;
      res.title = video.snippet.title;
      res.thumbnail = video.snippet.thumbnails.standard
        ? video.snippet.thumbnails.standard.url
        : video.snippet.thumbnails.high.url;
    })
    .catch((error) => {
      console.error("Error:", error);
    });

  return res;
}
```

Hai function n√†y ch·ªâ l√† g·ªçi API c·ªßa Youtube theo t·ª´ kho√° t√¨m ki·∫øm. C√°c b·∫°n ƒë·ªçc document c·ªßa Youtube l√† okela. Kh√¥ng v·∫•n ƒë·ªÅ g√¨ v·ªÅ ph·∫ßn n√†y c·∫£.

## 4\. Ch·ª©c nƒÉng t√¨m ki·∫øm b√†i h√°t

·ªû ph·∫ßn n√†y m√¨nh c√≥ d√πng th∆∞ vi·ªán sweet alert ƒë·ªÉ cho giao di·ªán ƒë·∫πp h∆°n. C√°c b∆∞·ªõc c≈©ng ƒë∆°n gi·∫£n. ƒê·∫ßu ti√™n ch√∫ng ta s·∫Ω c√≥ h√†m **getInfoTheSong** h√†m n√†y c√≥ ch·ª©c nƒÉng g·ªçi h√†m x·ª≠ l√Ω l·∫•y th√¥ng tin b√†i h√°t ·ªü ph√≠a tr√™n v√† hi·ªÉn th·ªã c√°c gi√° tr·ªã l√™n giao di·ªán m√†n h√¨nh.

```JavaScript
async function getInfoTheSong(id) {
  const songInfo = await getInfoSong(id);
  document.getElementById("song-name").textContent = songInfo.title;
  document.getElementById("song-artist").textContent = songInfo.artist;
  if (songInfo.thumbnail || songInfo.thumbnail !== NOT_FOUND) {
    document.getElementById("album-cover").src = songInfo.thumbnail;
  }
}
```

·ªû b∆∞·ªõc x·ª≠ l√Ω t√¨m ki·∫øm ta s·∫Ω x·ª≠ l√Ω t·ª´ng b∆∞·ªõc nh∆∞ sau:

* Nh·∫≠n ƒë∆∞·ª£c ƒë·∫ßu v√†o input key search c·ªßa ng∆∞·ªùi d√πng.
    
* G·ªçi h√†m **searchKey** ph√≠a tr√™n ƒë·ªÉ l·∫•y th√¥ng tin danh s√°ch b√†i h√°t.
    
* L∆∞u danh s√°ch b√†i h√°t v√† default selected b√†i h√°t ƒë·∫ßu ti√™n.
    
* Ph√°t nh·∫°c.
    

```JavaScript
document.getElementById("btn-search").addEventListener("click", (event) => {
  event.preventDefault();
  Swal.fire({
    title: "ƒêi·ªÅn t√™n b√†i h√°t",
    input: "text",
    inputAttributes: {
      autocapitalize: "off",
    },
    showCancelButton: true,
    confirmButtonText: "Search",
    showLoaderOnConfirm: true,
    preConfirm: async (songName) => {
      const ids = await searchKey(songName);
      if (ids.length === 0) {
        AlertError(NOT_FOUND_SONG, "");
        return;
      }

      localStorage.setItem(VIDEO_YOUTUBE_ID, ids);
      localStorage.setItem(SELECTED_VIDEO_ID, ids[0]);
      document.getElementById("song").src =
        "https://www.youtube.com/embed/" +
        ids[0] +
        "?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1";
      document.getElementById("icon-play-pause").className = "fa fa-pause";

      // get the song's information
      await getInfoTheSong(ids[0]);
    },
    allowOutsideClick: () => !Swal.isLoading(),
  }).then((result) => {});
});
```

## 5\. Ch·ª©c nƒÉng play/pause

·ªû b∆∞·ªõc x·ª≠ l√Ω n√†y ta ki·ªÉm tra n·∫øu tr·∫°ng th√°i v√† b·∫≠t t·∫Øt nh·∫°c t∆∞∆°ng ·ª©ng v·ªõi tr·∫°ng th√°i hi·ªán t·∫°i

```JavaScript
document.getElementById("btn-play-song").addEventListener("click", (event) => {
  document.getElementById("icon-play-pause").className =
    document.getElementById("icon-play-pause").className === "fa fa-play"
      ? "fa fa-pause"
      : "fa fa-play";
  const isAuto =
    document.getElementById("icon-play-pause").className === "fa fa-play"
      ? "0"
      : "1";
  document.getElementById("song").src =
    "https://www.youtube.com/embed/" +
    localStorage.getItem(SELECTED_VIDEO_ID) +
    "?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=" +
    isAuto;
})
```

## 6\. Ch·ª©c nƒÉng ch·ªçn b√†i tr∆∞·ªõc v√† b√†i k·∫ø ti·∫øp

Tr∆∞·ªõc khi t·ªõi chi ti·∫øt t·ª´ng ch·ª©c nƒÉng. Ta c√≥ h√†m l·∫•y v·ªã tr√≠ m·ªõi c·ªßa b√†i h√°t

* N·∫øu ng∆∞·ªùi d√πng next b√†i =&gt; b√†i h√°t k·∫ø ti·∫øp =&gt; v·ªã tr√≠ b√†i h√°t tƒÉng th√™m 1. Tuy nhi√™n n·∫øu v·ªã tr√≠ m·ªõi v∆∞·ª£t qu√° s·ªë l∆∞·ª£ng b√†i h√°t trong list =&gt; quay l·∫°i b√†i h√°t ƒë·∫ßu ti√™n =&gt; v·ªã tr√≠ m·ªõi l√† 0.
    
* N·∫øu ng∆∞·ªùi d√πng previous b√†i =&gt; b√†i h√°t tr∆∞·ªõc =&gt; v·ªã tr√≠ b√†i h√°t tr·ª´ th√™m 1. Tuy nhi√™n n·∫øu v·ªã tr√≠ m·ªõi nh·ªè h∆°n 0 =&gt; quay l·∫°i b√†i h√°t cu·ªëi c√πng =&gt; v·ªã tr√≠ m·ªõi l√† length danh s√°ch - 1.
    

```JavaScript
function getNewIndex(type) {
  const ids = localStorage.getItem(VIDEO_YOUTUBE_ID).split(",");
  const selectedID = localStorage.getItem(SELECTED_VIDEO_ID);
  let newIndex = 0;
  for (let i = 0; i < ids.length; i++) {
    if (ids[i] === selectedID && type === "backward") {
      newIndex = i - 1;
      return newIndex < 0 ? ids.length - 1 : newIndex;
    }

    if (ids[i] === selectedID && type === "forward") {
      newIndex = i + 1;
      return newIndex > ids.length - 1 ? 0 : newIndex;
    }
  }

  return newIndex;
}
```

**Ch·ª©c nƒÉng ch·ªçn b√†i k·∫ø ti·∫øp**

```JavaScript
document
  .getElementById("btn-forward")
  .addEventListener("click", async (event) => {
    const newForwardIndex = getNewIndex("forward");
    const ids = localStorage.getItem(VIDEO_YOUTUBE_ID).split(",");
    localStorage.setItem(SELECTED_VIDEO_ID, ids[newForwardIndex]);

    document.getElementById("song").src =
      "https://www.youtube.com/embed/" +
      ids[newForwardIndex] +
      "?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1";
    await getInfoTheSong(ids[newForwardIndex]);
  });
```

**Ch·ª©c nƒÉng ch·ªçn b√†i tr∆∞·ªõc**

```JavaScript
document
  .getElementById("btn-backward")
  .addEventListener("click", async (event) => {
    const newBackwardIndex = getNewIndex("backward");
    const ids = localStorage.getItem(VIDEO_YOUTUBE_ID).split(",");
    localStorage.setItem(SELECTED_VIDEO_ID, ids[newBackwardIndex]);

    document.getElementById("song").src =
      "https://www.youtube.com/embed/" +
      ids[newBackwardIndex] +
      "?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1";
    await getInfoTheSong(ids[newBackwardIndex]);
  });
```

# IV. K·∫øt lu·∫≠n

ƒê√¢y l√† 1 s·ªë h√¨nh ·∫£nh v√† video k·∫øt qu·∫£ sau khi build code xong nh√© m·ªçi ng∆∞·ªùi ^^

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1684689165180/ebd1d763-ba1f-4b0e-9af5-dc4f4151a2ab.png align="center")

<center><iframe width="560" height="315" src="https://www.youtube.com/embed/Jn5PETnoRYI"></iframe></center>

* Website ·ª©ng d·ª•ng: https://nguyenvantuan2391996.github.io/game-development/applications/music-player/home.html
    
* Source code: https://github.com/nguyenvantuan2391996/game-development/tree/master/applications/music-player