---
title: "TƒÉng th√™m ni·ªÅm vui v·ªõi Chrome Extension hi·ªÉn th·ªã ·∫£nh gif gi·∫£i tr√≠"
seoTitle: "TƒÉng th√™m ni·ªÅm vui v·ªõi Chrome Extension hi·ªÉn th·ªã ·∫£nh gif gi·∫£i tr√≠"
seoDescription: "B·∫°n ƒë√£ bao gi·ªù c·∫£m th·∫•y c·∫ßn m·ªôt ch√∫t ni·ªÅm vui v√† th∆∞ gi√£n trong khi l∆∞·ªõt web sau nh·ªØng gi·ªù l√†m vi·ªác cƒÉng th·∫≥ng?"
datePublished: Mon Jun 12 2023 03:20:39 GMT+0000 (Coordinated Universal Time)
cuid: clisae77d086qhtnv8bis32pj
slug: tang-them-niem-vui-voi-chrome-extension-hien-thi-anh-gif-giai-tri
cover: https://cdn.hashnode.com/res/hashnode/image/upload/v1686241666513/d1ac6e49-aed8-4bf9-97a0-721662987a5d.png
ogImage: https://cdn.hashnode.com/res/hashnode/image/upload/v1686241714942/f27d5e91-1809-497d-97ce-64e5f8915c6b.png
tags: javascript, extension, gif, chrome-extension

---

# I. Gi·ªõi thi·ªáu

![Cute Korean GIFs | Tenor](https://media1.giphy.com/media/26lCQv8GAQEDmXXa0/giphy.gif align="center")

B·∫°n ƒë√£ bao gi·ªù c·∫£m th·∫•y c·∫ßn m·ªôt ch√∫t ni·ªÅm vui v√† th∆∞ gi√£n trong khi l∆∞·ªõt web sau nh·ªØng gi·ªù l√†m vi·ªác cƒÉng th·∫≥ng? H√£y t∆∞·ªüng t∆∞·ª£ng b·∫°n c√≥ th·ªÉ t·∫°o ra m·ªôt tr·∫£i nghi·ªám duy nh·∫•t trong tr√¨nh duy·ªát c·ªßa b·∫°n v·ªõi vi·ªác hi·ªÉn th·ªã ng·∫´u nhi√™n nh·ªØng h√¨nh ·∫£nh gif vui nh·ªôn v√† gi·∫£i tr√≠. ƒê√≥ ch√≠nh l√† s·ª© m·ªánh c·ªßa Chrome Extension "TƒÉng th√™m ni·ªÅm vui v·ªõi Chrome Extension hi·ªÉn th·ªã ·∫£nh gif gi·∫£i tr√≠". üòçüòçüòç

Chrome Extension n√†y l√† m·ªôt c√¥ng c·ª• m·ªü r·ªông ƒë∆°n gi·∫£n nh∆∞ng h·ªØu √≠ch, gi√∫p b·∫°n t·∫°o th√™m ni·ªÅm vui v√† s·ª± b·∫•t ng·ªù trong qu√° tr√¨nh l∆∞·ªõt web h√†ng ng√†y. Khi c√†i ƒë·∫∑t v√† k√≠ch ho·∫°t Extension n√†y, b·∫°n s·∫Ω ƒë∆∞·ª£c tr·∫£i nghi·ªám nh·ªØng h√¨nh ·∫£nh gif ng·∫´u nhi√™n ho·∫∑c ·∫£nh gif theo t·ª´ kho√° t√¨m ki·∫øm ƒë∆∞·ª£c hi·ªÉn th·ªã tr√™n tr√¨nh duy·ªát c·ªßa m√¨nh.

Nh·ªØng h√¨nh ·∫£nh gif ƒë∆∞·ª£c ch·ªçn l·ªçc k·ªπ l∆∞·ª°ng, ƒë·∫£m b·∫£o mang ƒë·∫øn ni·ªÅm vui v√† n·ª• c∆∞·ªùi cho ng∆∞·ªùi d√πng. T·ª´ nh·ªØng t·∫•m h√¨nh ch√∫ m√®o d·ªÖ th∆∞∆°ng ƒë·∫øn nh·ªØng pha h√†i h∆∞·ªõc ƒë·∫ßy s√°ng t·∫°o, m·ªói l·∫ßn b·∫°n m·ªü m·ªôt tab m·ªõi ho·∫∑c t·∫£i l·∫°i trang, m·ªôt h√¨nh ·∫£nh gif m·ªõi s·∫Ω xu·∫•t hi·ªán, l√†m t∆∞∆°i m·ªõi tr·∫£i nghi·ªám c·ªßa b·∫°n. üòçüòçüòç

Extension n√†y c≈©ng cung c·∫•p t√πy ch·ªçn t√πy ch·ªânh, cho ph√©p b·∫°n thay ƒë·ªïi t·ªëc ƒë·ªô xu·∫•t hi·ªán c·ªßa c√°c h√¨nh ·∫£nh gif, ho·∫∑c th·∫≠m ch√≠ th√™m c√°c t·ª´ kh√≥a ƒë·ªÉ ch·ªâ hi·ªÉn th·ªã c√°c lo·∫°i h√¨nh ·∫£nh gif c·ª• th·ªÉ m√† b·∫°n quan t√¢m.

V·ªõi Extension n√†y, b·∫°n s·∫Ω kh√¥ng bao gi·ªù c·∫£m th·∫•y bu·ªìn ch√°n khi l∆∞·ªõt web n·ªØa. H√£y ƒë·ªÉ nh·ªØng h√¨nh ·∫£nh gif t∆∞∆°i m·ªõi v√† vui nh·ªôn l√†m s√°ng t·ªè m·ªói ng√†y c·ªßa b·∫°n v√† t·∫°o th√™m ni·ªÅm vui v√† n·ª• c∆∞·ªùi trong cu·ªôc s·ªëng tr·ª±c tuy·∫øn c·ªßa b·∫°n.

![Cat GIF - Cat - Discover & Share GIFs | Cat gif, Cats, I love dogs](https://i.pinimg.com/originals/9a/3c/3f/9a3c3fb5f73822af8514df07f6676392.gif align="center")

# II. Chrome extension

## 1\. ƒê·ªãnh nghƒ©a

Chrome extension (ti·ªán √≠ch m·ªü r·ªông Chrome) l√† m·ªôt ph·∫ßn m·ªü r·ªông cho tr√¨nh duy·ªát Google Chrome, cho ph√©p b·∫°n m·ªü r·ªông v√† t√πy ch·ªânh tr·∫£i nghi·ªám tr√¨nh duy·ªát c·ªßa m√¨nh. ƒê∆∞·ª£c vi·∫øt b·∫±ng ng√¥n ng·ªØ l·∫≠p tr√¨nh web nh∆∞ HTML, CSS v√† JavaScript, Chrome extension c√≥ th·ªÉ thay ƒë·ªïi c√°ch l√†m vi·ªác v√† t∆∞∆°ng t√°c v·ªõi tr√¨nh duy·ªát Chrome, cung c·∫•p c√°c t√≠nh nƒÉng v√† ch·ª©c nƒÉng b·ªï sung.

C√°c Chrome extension c√≥ th·ªÉ th·ª±c hi·ªán nhi·ªÅu nhi·ªám v·ª• kh√°c nhau, t·ª´ vi·ªác thay ƒë·ªïi giao di·ªán c·ªßa tr√¨nh duy·ªát, cung c·∫•p t√≠nh nƒÉng m·ªõi nh∆∞ b·ªô c√¥ng c·ª• l·∫≠p tr√¨nh, qu·∫£n l√Ω t·∫£i xu·ªëng, qu·∫£n l√Ω m·∫≠t kh·∫©u, ki·ªÉm tra ch√≠nh t·∫£, ƒë·∫øn t√≠ch h·ª£p v·ªõi c√°c d·ªãch v·ª• b√™n ngo√†i nh∆∞ c√¥ng c·ª• t√¨m ki·∫øm, m·∫°ng x√£ h·ªôi v√† ·ª©ng d·ª•ng web kh√°c.

C√°c Chrome extension c√≥ th·ªÉ ƒë∆∞·ª£c c√†i ƒë·∫∑t t·ª´ Chrome Web Store, n∆°i ng∆∞·ªùi d√πng c√≥ th·ªÉ t√¨m ki·∫øm, t·∫£i xu·ªëng v√† qu·∫£n l√Ω c√°c extension. Ng∆∞·ªùi d√πng c√≥ th·ªÉ t√πy ch·ªânh tr√¨nh duy·ªát c·ªßa m√¨nh b·∫±ng c√°ch b·∫≠t ho·∫∑c t·∫Øt c√°c extension theo √Ω mu·ªën.

Chrome extension mang l·∫°i s·ª± linh ho·∫°t v√† t√πy ch·ªânh cao cho ng∆∞·ªùi d√πng Chrome, cho ph√©p h·ªç t√πy ch·ªânh tr√¨nh duy·ªát theo nhu c·∫ßu v√† s·ªü th√≠ch c√° nh√¢n.

![How to develop extension to download images from google pages](https://blog.ldtalentwork.com/wp-content/uploads/2019/12/google-chrome-extensions-977x4881-976x488-1.jpg align="center")

## 2\. Ng√¥n ng·ªØ ph√°t tri·ªÉn

JavaScript ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ x√¢y d·ª±ng logic v√† t∆∞∆°ng t√°c c·ªßa extension. B·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng JavaScript ƒë·ªÉ th·ª±c hi·ªán c√°c ch·ª©c nƒÉng nh∆∞ t·∫°o, x√≥a v√† t∆∞∆°ng t√°c v·ªõi c√°c ph·∫ßn t·ª≠ tr√™n trang web, g·ª≠i v√† nh·∫≠n d·ªØ li·ªáu t·ª´ m√°y ch·ªß, l∆∞u tr·ªØ d·ªØ li·ªáu c·ª•c b·ªô v√† nhi·ªÅu h∆°n n·ªØa.

HTML v√† CSS ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ thi·∫øt k·∫ø giao di·ªán ng∆∞·ªùi d√πng c·ªßa extension. HTML ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ x√¢y d·ª±ng c·∫•u tr√∫c c·ªßa trang, trong khi CSS ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ t·∫°o ki·ªÉu v√† trang tr√≠ cho c√°c ph·∫ßn t·ª≠.

Ngo√†i ra, b·∫°n c≈©ng c√≥ th·ªÉ s·ª≠ d·ª•ng c√°c ng√¥n ng·ªØ v√† c√¥ng ngh·ªá kh√°c ƒë·ªÉ ph√°t tri·ªÉn Chrome extension nh∆∞ TypeScript, React, Angular v√† Vue.js. T√πy thu·ªôc v√†o y√™u c·∫ßu v√† s·ªü th√≠ch c·ªßa b·∫°n, b·∫°n c√≥ th·ªÉ l·ª±a ch·ªçn c√¥ng ngh·ªá ph√π h·ª£p ƒë·ªÉ x√¢y d·ª±ng extension.

‚ùóL∆∞u √Ω r·∫±ng Chrome extension kh√¥ng ch·ªâ gi·ªõi h·∫°n trong vi·ªác s·ª≠ d·ª•ng c√°c ng√¥n ng·ªØ tr√™n, b·∫°n c≈©ng c√≥ th·ªÉ s·ª≠ d·ª•ng c√°c c√¥ng ngh·ªá kh√°c nh∆∞ Python ho·∫∑c Ruby ƒë·ªÉ x√¢y d·ª±ng ph·∫ßn m·ªü r·ªông b·∫±ng c√°ch s·ª≠ d·ª•ng m·ªôt s·ªë c√¥ng c·ª• ho·∫∑c th∆∞ vi·ªán c√≥ s·∫µn.

Quan tr·ªçng nh·∫•t l√† hi·ªÉu r·∫±ng vi·ªác ch·ªçn ng√¥n ng·ªØ ph·ª• thu·ªôc v√†o ki·∫øn th·ª©c v√† kinh nghi·ªám c·ªßa b·∫°n, c≈©ng nh∆∞ y√™u c·∫ßu c·ª• th·ªÉ c·ªßa d·ª± √°n Chrome extension b·∫°n ƒëang ph√°t tri·ªÉn.

# III. X√¢y d·ª±ng chrome extension

## 1\. C·∫•u tr√∫c

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1686239767976/4912653d-b34a-4d17-a23a-a93178558845.png align="center")

* css: Th∆∞ m·ª•c l∆∞u c√°c file css ƒë·ªÉ cƒÉn ch·ªânh, l√†m ƒë·∫πp giao di·ªán.
    
* images: Th∆∞ m·ª•c l∆∞u ·∫£nh c·ªßa extension.
    
* js: Th∆∞ m·ª•c ch·ª©a c√°c file JavaScript ƒë·ªÉ x·ª≠ l√Ω c√°c ch·ª©c nƒÉng c·ªßa extension.
    
* src: Giao di·ªán extension.
    

## 2\. Khai b√°o th√¥ng tin extension

```json
{
  "name": "Display Gif Image Extension",
  "description": "The extension supports displaying the gif image when load a website.",
  "version": "1.0.0",
  "action": {
    "default_popup": "src/popup.html",
    "default_icon": "images/icon.png"
  },
  "icons": {
    "128": "images/icon.png"
  },
  "content_scripts": [
    {
      "matches": [
        "<all_urls>"
      ],
      "js": [
        "js/apis.js",
        "js/content.js",
        "js/constants.js"
      ],
      "run_at": "document_start"
    }
  ],
  "background": {
    "service_worker": "js/background.js"
  },
  "host_permissions": [
    "*://*/*"
  ],
  "permissions": [
    "webNavigation",
    "storage"
  ],
  "manifest_version": 3
}
```

**manifest.json**: File manifest.json l√† m·ªôt file c·∫•u h√¨nh c·∫ßn thi·∫øt trong qu√° tr√¨nh ph√°t tri·ªÉn Chrome extension. N√≥ ch·ª©a c√°c th√¥ng tin v·ªÅ extension, bao g·ªìm t√™n, phi√™n b·∫£n, bi·ªÉu t∆∞·ª£ng, quy·ªÅn truy c·∫≠p v√† c√°c t·∫≠p tin JavaScript, CSS v√† HTML li√™n quan.

## 3\. Giao di·ªán

**popup.html**: Giao di·ªán c·ªßa extension

```html
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The extension supports for displaying the gif image when the website was loaded</title>
</head>
<link rel="stylesheet" href="../css/popup.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha.6/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

<body>

<div class="container">
    <div class="input-group center-item">
        <h3>Config Gif Image</h3>
    </div>
    <div class="alert alert-success" role="alert" id="alert-success" style="display: none; z-index: 999999; position: fixed;margin-left: 30%">
    </div>
    <div class="input-group">
        <label for="select-type"></label><select class="custom-select mr-2" id="select-type">
            <option id="type-random" value="type-random" selected>Random Gif</option>
            <option id="type-search-key" value="type-search-key">Search Gif By Key</option>
        </select>
        <label for="select-position"></label>
            <select class="custom-select" id="select-position">
            <option id="type-bottom-right" value="type-bottom-right" selected>Bottom Right</option>
            <option id="type-top-right" value="type-top-right">Top Right</option>
            <option id="type-bottom-left" value="type-bottom-left">Bottom Left</option>
            <option id="type-top-left" value="type-top-left">Top Left</option>
        </select>
    </div>
    <div class="mt-2">
        <label for="input-key-search"></label><input type="text" id="input-key-search" class="form-control" value="" placeholder="Enter key search" hidden>
    </div>
    <div class="input-group center-item">
        <button type="button" class="btn btn-primary mr-2" id="btn-save-config">
            Save
        </button>
        <button type="button" class="btn btn-danger mr-2" id="btn-turn-on-off">
            Off
        </button>
        <button type="button" class="btn btn-danger" id="btn-clear-config">
            Clear
        </button>
    </div>
</div>

</body>
</html>

<script src="../js/popup.js"></script>
<script src="../js/constants.js"></script>
```

**popup.css**: Th√™m style v√†o c√°c ph·∫ßn t·ª≠ HTML ƒë√≥ nh∆∞ ƒë·ªïi b·ªë c·ª•c, m√†u s·∫Øc trang, ƒë·ªïi m√†u ch·ªØ cho giao di·ªán.

```css
.input-group {
    margin-top: 30px;
    position: relative;
}

.input-group {
    position: relative;
}

.input-group-addon {
    border: none;
}

body {
    width: 350px;
    height: 350px;
}

.center-item {
    display: flex;
    justify-content: center;
    align-items: center;
}
```

V√¨ ph·∫ßn giao di·ªán html v√† css c≈©ng kh√¥ng c√≥ g√¨ qu√° ph·ª©c t·∫°p n√™n c√°c b·∫°n c√≥ th·ªÉ t·ª± ƒë·ªçc hi·ªÉu n√≥ nh√©! üòÑüòÑüòÑ Sau khi html v√† css 1 ch√∫t ch√∫ng ta s·∫Ω ƒë∆∞·ª£c giao di·ªán nh∆∞ th·∫ø n√†y.

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1686240114729/b723ebb9-ecd6-4c81-8bab-6448e295f543.png align="center")

## 4. T·∫°o API key GIPHY

Tr∆∞·ªõc khi v√†o c√°c ch·ª©c nƒÉng chi ti·∫øt. Do ngu·ªìn ·∫£nh gift t·ª´ GIPHY n√™n m·ªçi ng∆∞·ªùi generate m·ªôt api key ƒë·ªÉ l·∫•y th√¥ng tin key. C√°c b∆∞·ªõc l·∫•y api key nh∆∞ sau:

1. ƒêƒÉng nh·∫≠p ho·∫∑c ƒëƒÉng k√Ω 1 t√†i kho·∫£n ·ªü https://developers.giphy.com/
2. V√†o [Developers giphy](https://developers.giphy.com/dashboard/?create=true)
3. Click v√†o Create an App. Sau khi create th√†nh c√¥ng ch√∫ng ta s·∫Ω nh·∫≠n ƒë∆∞·ª£c 1 API Key app c·ªßa b·∫°n.
4. G·ªçi th·ª≠ API l·∫•y th√¥ng tin ·∫£nh gif ·ªü https://developers.giphy.com/explorer/

## 5. X·ª≠ l√Ω c√°c API c·ªßa GIPHY

·ªû ƒë√¢y m√¨nh s·∫Ω get th√¥ng tin url ·∫£nh gif t·ª´ GIPHY ·ªü 2 ch·∫ø ƒë·ªô: random ·∫£nh gif v√† t√¨m ki·∫øm theo t·ª´ kho√°.

```JavaScript
async function getGifImageByRandom() {
  const requestOptions = {
    method: "GET",
    redirect: "follow",
  };

  let giftImage = "";
  await fetch(
    "https://api.giphy.com/v1/gifs/random?api_key=" +
      API_KEY_GIF +
      "&tag=&rating=g",
    requestOptions
  )
    .then((response) => response.json())
    .then((result) => {
      giftImage = result.data.images.original.url;
    })
    .catch((error) => {
      console.log("error", error);
    });

  return giftImage;
}
```

```JavaScript
async function getGifImageByKey(keySearch) {
  const requestOptions = {
    method: "GET",
    redirect: "follow",
  };

  let listGifImages = [];
  await fetch(
    "https://api.giphy.com/v1/gifs/search?api_key=" +
      API_KEY_GIF +
      "&q=" +
      keySearch +
      "&limit=25&offset=0&rating=g&lang=en",
    requestOptions
  )
    .then((response) => response.json())
    .then((result) => {
      for (const element of result.data) {
        listGifImages.push(element.images.original.url);
      }
    })
    .catch((error) => {
      console.log("error", error);
    });

  return listGifImages[Math.floor(Math.random() * listGifImages.length)];
}
```
## 6. X·ª≠ l√Ω khi website ƒë∆∞·ª£c t·∫£i ho√†n th√†nh

Trong m·ªôt Chrome extension, file **background.js** c√≥ ch·ª©c nƒÉng quan tr·ªçng trong vi·ªác x·ª≠ l√Ω c√°c s·ª± ki·ªán v√† t∆∞∆°ng t√°c trong n·ªÅn c·ªßa extension. N√≥ th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ th·ª±c hi·ªán c√°c t√°c v·ª• kh√¥ng giao di·ªán ng∆∞·ªùi d√πng tr·ª±c ti·∫øp nh∆∞ t∆∞∆°ng t√°c v·ªõi c√°c s·ª± ki·ªán c·ªßa tr√¨nh duy·ªát, l∆∞u tr·ªØ d·ªØ li·ªáu, g·ª≠i v√† nh·∫≠n th√¥ng b√°o, th·ª±c hi·ªán c√°c c√¥ng vi·ªác ƒë·ªãnh k·ª≥ v√† nhi·ªÅu h∆°n n·ªØa.

V·∫≠y trong file n√†y ch√∫ng ta b·∫Øt s·ª± ki·ªán webNavigation.onDOMContentLoaded ƒë·ªÉ h·ª©ng s·ª± ki·ªán khi website, frame c·ªßa website ƒë∆∞·ª£c loaded. Ch√∫ng ta s·∫Ω ki·ªÉm tra url hi·ªán t·∫°i n·∫øu b·∫±ng v·ªõi event url h·ª©ng ƒë∆∞·ª£c th√¨ s·∫Ω x·ª≠ l√Ω g·ª≠i 1 message t·ªõi content.js ƒë·ªÉ x·ª≠ l√Ω.

```JavaScript
importScripts("constants.js");

chrome.webNavigation.onDOMContentLoaded.addListener(async function (details) {
  const currentURL = await getCurrentTabUrl();
  if (currentURL === details.url) {
    /* global chrome */
    await chrome.tabs.query(
      {
        active: true,
        currentWindow: true,
      },
      function (tabs) {
        try {
          chrome.tabs.sendMessage(tabs[0].id, {
            from: BACKGROUND_SCREEN,
            subject: HANDLE_MAIN_WEBSITE_LOADED,
          });
        } catch (e) {
          console.error(e);
        }

        if (chrome.runtime.lastError) {
          console.error(chrome.runtime.lastError.message);
        }
      }
    );
  }
});

async function getCurrentTabUrl() {
  const tabs = await chrome.tabs.query({ active: true });
  return tabs[0].url;
}
```

## 7. X·ª≠ l√Ω hi·ªÉn th·ªã ·∫£nh gif

Trong m·ªôt Chrome extension, file **content.js** c√≥ ch·ª©c nƒÉng ch√≠nh l√† t∆∞∆°ng t√°c v√† thay ƒë·ªïi n·ªôi dung c·ªßa trang web hi·ªán t·∫°i m√† extension ƒë∆∞·ª£c ch√®n v√†o. N√≥ ho·∫°t ƒë·ªông nh∆∞ m·ªôt script ch·∫°y tr·ª±c ti·∫øp trong ng·ªØ c·∫£nh c·ªßa trang web v√† c√≥ th·ªÉ truy c·∫≠p v√† thay ƒë·ªïi DOM, th·ª±c hi·ªán c√°c t√°c v·ª• t∆∞∆°ng t√°c ng∆∞·ªùi d√πng v√† t∆∞∆°ng t√°c v·ªõi c√°c th√†nh ph·∫ßn c·ªßa trang.

Khi nh·∫≠n ƒë∆∞·ª£c message t·ª´ **background.js** g·ª≠i sang ch√∫ng ta s·∫Ω g·ªçi api GIPHY ƒë·ªÉ l·∫•y th√¥ng tin url c·ªßa gif image. Ti·∫øp sau ƒë√≥ s·∫Ω t·∫°o 1 element c√≥ tag l√† **img** v√† th·ª±c hi·ªán append v√†o body c·ªßa website hi·ªán t·∫°i

```JavaScript
chrome.runtime.onMessage.addListener(async function (
  msg,
  sender,
  sendResponse
) {
  console.log(sender, sendResponse);
  if (
    msg.from === BACKGROUND_SCREEN &&
    msg.subject === HANDLE_MAIN_WEBSITE_LOADED
  ) {
    await chrome.storage.local.get(
      [
        "gif_extension_select_type",
        "gif_extension_key_search",
        "gif_extension_select_position",
        "turn_on_off",
      ],
      async function (result) {
        let selectType = result.gif_extension_select_type
          ? result.gif_extension_select_type
          : "type-random";
        let keySearch = result.gif_extension_key_search
          ? result.gif_extension_key_search
          : "";
        let selectPosition = result.gif_extension_select_position
          ? result.gif_extension_select_position
          : "type-bottom-right";
        let onOff = result.turn_on_off ? result.turn_on_off : "On";

        if (onOff === "Off") {
          return;
        }

        if (selectType === "type-search-key" && !keySearch) {
          keySearch = "cat cute";
        }

        let gifImageUrl =
          selectType === "type-random"
            ? await getGifImageByRandom()
            : await getGifImageByKey(keySearch);

        // create element
        const img = document.createElement("img");
        img.src = gifImageUrl;
        img.width = 200;
        img.height = 200;
        img.style.zIndex = "999";

        switch (selectPosition) {
          case "type-bottom-right":
            img.style.position = "fixed";
            img.style.bottom = "0";
            img.style.right = "0";
            break;
          case "type-top-right":
            img.style.position = "absolute";
            img.style.top = "0";
            img.style.right = "0";
            break;
          case "type-bottom-left":
            img.style.position = "absolute";
            img.style.bottom = "0";
            img.style.left = "0";
            break;
          case "type-top-left":
            img.style.position = "absolute";
            img.style.top = "0";
            img.style.left = "0";
            break;
        }

        document.body.appendChild(img);
      }
    );
  }
```

## 8. X·ª≠ l√Ω c√°c s·ª± ki·ªán kh√°c

Ch√∫ng ta s·∫Ω c√≥ c√°c ch·∫ø ƒë·ªô random v√† hi·ªÉn th·ªã ·∫£nh theo t·ª´ kho√°. ƒê·ªÉ l∆∞u l·∫°i c√°c config n√†y ch√∫ng ta b·∫Øt s·ª± ki·ªán t·ª´ **popup.js** v√† th·ª±c hi·ªán l∆∞u config n√†y v√†o localstorage chrome api.

```JavaScript
chrome.runtime.onMessage.addListener(async function (
  msg,
  sender,
  sendResponse
) {
  console.log(sender, sendResponse);
  if (msg.from === POPUP_SCREEN && msg.subject === HANDLE_SAVE_CONFIG) {
    /* global chrome */
    chrome.storage.local.set(
      { gif_extension_select_type: msg.objectSearch.type },
      function () {
        console.log("Data select type saved successfully");
      }
    );

    chrome.storage.local.set(
      { gif_extension_key_search: msg.objectSearch.key_search },
      function () {
        console.log("Data key search saved successfully");
      }
    );

    chrome.storage.local.set(
      { gif_extension_select_position: msg.position },
      function () {
        console.log("Data select position saved successfully");
      }
    );

    alert("Data saved successfully");
  }

  if (msg.from === POPUP_SCREEN && msg.subject === HANDLE_ON_OFF) {
    chrome.storage.local.set({ turn_on_off: msg.onOff }, function () {
      console.log("Data turn on/off saved successfully");
    });
  }

  if (msg.from === POPUP_SCREEN && msg.subject === HANDLE_CLEAR_CONFIG) {
    // Remove the data
    chrome.storage.local.remove(
      [
        "gif_extension_select_type",
        "gif_extension_key_search",
        "gif_extension_select_position",
        "turn_on_off",
      ],
      function () {
        console.log("Data removed successfully");
      }
    );

    alert("Data removed successfully");
  }
});
```

# IV. K·∫øt lu·∫≠n

ƒê√¢y l√† 1 s·ªë h√¨nh ·∫£nh v√† video k·∫øt qu·∫£ sau khi build code xong nh√© m·ªçi ng∆∞·ªùi ^^

<center><iframe width="560" height="315" src="https://www.youtube.com/embed/qaKVsPGY2gg"></iframe></center>

* Link t·∫£i extension: https://chrome.google.com/webstore/detail/display-gif-image-extensi/ifjohhllghacnfeeocgnolojolodcfhl?hl=en&authuser=1
    
* Source code: https://github.com/nguyenvantuan2391996/extensions-development/tree/master/display-gif-image-extension